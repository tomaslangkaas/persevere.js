//https://github.com/tomaslangkaas/persevere.js, MIT license
(function(d,c){var a,b;!d.localStorage&&(a=c.body)&&a.addBehavior&&a.addBehavior("#default#userdata")&&(a.load("localStorage"),b=a.XMLDocument.documentElement.attributes,d.localStorage={length:b.length,key:function(a){return a>=this.length?null:b[a].name},getItem:function(b){return a.getAttribute(b)},setItem:function(b,c){a.setAttribute(b,c);a.save("localStorage");this.length+=null===a.getAttribute(b)?1:0},removeItem:function(b){null!==a.getAttribute(b)&&(a.removeAttribute(b),a.save("localStorage"),this.length=Math.max(0,this.length-1))},clear:function(){for(;this.length;)a.removeAttribute(b[--this.length].name);a.save("localStorage")}})})(this,this.document);window.q=function(){var d;try{d=window.localStorage}catch(c){}return{supported:d?!0:!1,load:function(c,a){var b;try{b=d.getItem(c)}catch(e){b=null}null===b&&a&&a();return b},save:function(c,a,b){try{d.setItem(c,a)}catch(e){b&&b()}},empty:function(c){try{d.clear()}catch(a){c&&c()}}}}();
